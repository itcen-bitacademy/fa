<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="menu24">
	<!-- Test -->

	<select id="readCount" resultType="int" parameterType="1cardvo">	
			<![CDATA[
				select count(*)
				from tb_cardmanager
				where delete_flag= #{deleteFlag }
			]]>
		 <if  test="inputperiodStart!=null ">		    
			<![CDATA[
				and insert_day >= #{inputperiodStart }
			]]>
		</if>
		<if  test='inputperiodEnd!=null' >		    
			<![CDATA[
				and insert_day <= #{inputperiodEnd }
			]]>
		</if>
		<if  test="cardStartNo!=null ">		    
			<![CDATA[
				and card_no like concat(#{cardStartNo }, "%")
			]]>
		</if>
		<if  test="cardEndNo!=null ">		    
			<![CDATA[
				and card_no like concat("%", #{cardEndNo })
			]]>
		</if>

	</select>


	<select id="read" resultType="1cardvo" parameterType="map">
	<![CDATA[
		select  card_no as cardNo, validity, transportation, limitation, cvc, issuer, user, 
				company, abroad, password, deposit_no as depositNo,
				insert_userid as insertUserId, insert_day as insertDay, 
				update_userid as updateUserId, update_day as updateDay, 
				delete_flag as deleteFlag
		   from	tb_cardmanager
			where delete_flag= #{vo.deleteFlag }
		   
	]]>
	
		
		 <if  test="vo.inputperiodStart!=null">		    
			<![CDATA[
				and insert_day >= #{vo.inputperiodStart }
			]]>
		</if>
		<if  test="vo.inputperiodEnd!=null ">		    
			<![CDATA[
				and insert_day <= #{vo.inputperiodEnd }
			]]>
		</if>
		<if  test="vo.cardStartNo!=null ">		    
			<![CDATA[
				and card_no like concat(#{vo.cardStartNo }, "%")
			]]>
		</if>
		<if  test="vo.cardEndNo!=null ">		    
			<![CDATA[
				and card_no like concat("%", #{vo.cardEndNo })
			]]>
		</if>
		
	</select>

</mapper>