<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="menu44">

	<!--  TEST -->
	<insert id="save" parameterType="test08vo">
		<![CDATA[
		insert
		  into test
		values (null, #{name })
		]]>
		<selectKey keyProperty="no" resultType="long" order="AFTER">
			<![CDATA[
			select last_insert_id()
			]]>
		</selectKey>
	</insert>
	
	<select id="getSection" resultType="sectionvo">
	<![CDATA[
	select s.no, s.classification, s.code
	  from tb_section s
	 where s.parent_no = 5
	]]>
	</select>
	
	<select id="getList" resultType="intangibleAssetsVo">
	<![CDATA[
	select tb.id, tb.customer_no as customerNo, tb.taxbill_no as taxbillNo, tb.voucher_no as voucherNo, tb.taxbill_no as taxbillNo, tb.name,
		   tb.section_no as sectionNo, tb.code as code, s.classification as classification, tb.copy_count as copyCount, tb.purpose, tb.address, tb.user,
		   tb.acq_price as acqPrice, tb.addi_fee as addiFee, tb.pay_date as payDate, tb.tax_kind as taxKind, c.name as customerName, c.manager_name as customerManager,
		   tb.flag, tb.insert_userid as insertUserId, date_format(tb.insert_day, '%Y-%m-%d %h:%i:%s') as insertDay, tb.update_userid as updateUserId,
		   tb.update_day as updateDay
	  from tb_intangible_assets tb 
left outer join tb_section s on tb.code = s.code 
left outer join tb_customer c on tb.customer_no = c.no
	 where s.parent_no = 5
	   and flag ='s'
  order by tb.insert_day desc
  	]]>
	</select>

</mapper>