<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="menu15">
	
	<insert id="save" parameterType="salescustomervo">
		<![CDATA[
		insert
		  into tb_salescustomer
		values (#{no }, #{name }, #{ceo }, #{corporationNo }, #{zipCode }, #{address }, #{detailAddress }, #{phone }, #{conditions }, #{item }, 
				#{openDate }, #{jurisdictionOffice }, #{managerName }, #{managerEmail }, #{depositNo }, #{depositHost }, 
				#{insertUserid }, now(), null, null, 'N')
		]]>
	</insert>
	
	<select id="findAll" parameterType="string" resultType="salescustomervo">
		<![CDATA[
		select no, name, ceo, corporation_no as corporationNo, zip_code as zipCode, address, detail_address as detailAddress, 
			   concat(address, " (", zip_code, ")", " ", detail_address) as addressAll, phone, conditions, item, date_format(open_date, "%Y-%m-%d") as openDate,
		       jurisdiction_office as jurisdictionOffice, manager_name as managerName, manager_email as managerEmail,
		       deposit_no as depositNo, case when delete_flag = 'Y' then '삭제' when delete_flag = 'N' then '' end as deleteFlag, 
		       insert_userid as insertUserid, date_format(insert_day, "%Y-%m-%d %T") as insertDay,
		       update_userid as updateUserid, date_format(update_day, "%Y-%m-%d %T") as updateDay
		from tb_salescustomer
		]]>
		<if test="_parameter != '%%' ">
			<![CDATA[
			where no like #{_parameter }
			]]>	
		</if>
		<![CDATA[
		order by no
		]]>
	</select>
</mapper>