<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="menu59">

	<!--  계정과목 저장 -->
	<insert id="insert" parameterType="AccountManagement">
	   <![CDATA[
	   insert 
	     into tb_account_management(account_order,account_no,account_usedyear,account_statement_type,use_yn,insert_userid,insert_day) 
	   values(#{accountOrder}, #{accountNo}, #{accountUsedyear}, #{accountStatementType}, true, #{insertUserid}, now())
	   ]]>
		<selectKey keyProperty="no" resultType="long" order="AFTER">
	      <![CDATA[
	      select last_insert_id()
	      ]]>
	   </selectKey>
	</insert>
	
	<!--  재무제표 계정과목 현황조회 -->
	<select id="getAllList" resultType="AccountManagement">
		<![CDATA[
	  select m.account_order           					   as accountOrder
		   , m.account_no              					   as accountNo
		   , a.balance_type            					   as balanceType
	       , a.name              					   	   as accountName
		   , m.account_usedyear        					   as accountUsedyear
		   , m.account_statement_type                      as accountStatementType
		   , m.use_yn                 					   as useYn
		   , m.insert_userid           					   as insertUserid
		   , date_format(m.insert_day,'%Y-%m-%d %h:%i:%s') as insertDay 
		   , m.update_userid 						       as updateUserid 
		   , date_format(m.update_day,'%Y-%m-%d %h:%i:%s') as updateDay 
	    from tb_account_management m, tb_account a
	   where a.no = m.account_no
	   order by account_order
		]]>
	</select>

	<!--  재무제표 계정과목 조회 -->
	<select id="getAllAccountList" resultType="AccountManagement">
		<![CDATA[
	  select no   as accountNo  
	       , name as accountName
 		from tb_account
		]]>
	</select>
	

</mapper> 