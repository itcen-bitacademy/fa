<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="menu34">
	<!-- Team -->
	<select id="getPurchaseitemListall" resultType="purchaseitem33vo">
		<![CDATA[
		select p.idx, p.no, p.name, p.section_code as sectioncode, s.classification as sectionname, p.standard, p.price, p.purpose, f.no as factorycode ,f.name as factoryname, f.postaddress as factorypostaddress, f.roadaddress as factoryroadaddress, f.detailaddress as factorydetailaddress, f.manager_name as managername, date(p.produce_date) as producedate
		from tb_purchaseitem p, tb_factory f, tb_section s
		where p.no = f.purchaseitem_code and p.section_code = s.code and s.parent_no = 1 and p.delete_flag = "N"
        order by p.idx asc
		]]>
	</select>
	
	<select id="getPurchaseitemList" parameterType="int" resultType="purchaseitem33vo">
		<![CDATA[
		select p.idx, p.no, p.name, p.section_code as sectioncode, s.classification as sectionname, p.standard, p.price, p.purpose, f.no as factorycode ,f.name as factoryname, f.postaddress as factorypostaddress, f.roadaddress as factoryroadaddress, f.detailaddress as factorydetailaddress, f.manager_name as managername, date(p.produce_date) as producedate
		from tb_purchaseitem p, tb_factory f, tb_section s
		where p.no = f.purchaseitem_code and p.section_code = s.code and s.parent_no = 1 and p.delete_flag = "N"
        order by p.idx asc
        limit #{page_group }, 55
		]]>
	</select>
	
	<select id="getpagePurchaseitemList" parameterType="int" resultType="purchaseitem33vo">
		<![CDATA[
		select p.idx, p.no, p.name, p.section_code as sectioncode, s.classification as sectionname, p.standard, p.price, p.purpose, f.no as factorycode ,f.name as factoryname, f.postaddress as factorypostaddress, f.roadaddress as factoryroadaddress, f.detailaddress as factorydetailaddress, f.manager_name as managername, date(p.produce_date) as producedate
		from tb_purchaseitem p, tb_factory f, tb_section s
		where p.no = f.purchaseitem_code and p.section_code = s.code and s.parent_no = 1 and p.delete_flag = "N"
        order by p.idx asc
        limit #{page }, 11
		]]>
	</select>
	
	<select id="getSectionList" resultType="sectionvo">
		<![CDATA[
		select no, classification, code, last_update as lastUpdate, parent_no as parentNo from tb_section where parent_no = 1
		]]>
	</select>
	
	<select id="getFactorysectionList" resultType="sectionvo">
		<![CDATA[
		select no, classification, code, last_update as lastUpdate, parent_no as parentNo from tb_section where parent_no = 38
		]]>
	</select>
</mapper>